<div class="list-container">
  @if (loading()) {
    <div class="panel" style="text-align: center">
      <p class="muted">Loading records...</p>
    </div>
  } @else {
    @if (patients().length === 0) {
      <div class="panel" style="text-align: center; padding: 48px">
        <div class="muted" style="font-size: 1.1rem; margin-bottom: 16px">No patients found</div>
        <button class="btn btn-primary" (click)="onAddPatient()">Create your first patient</button>
      </div>
    } @else {
      <div class="cards">
        @for (patient of patients(); track patient.id) {
          <div class="card">
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 12px;
              "
            >
              <div>
                <div style="font-weight: 700; font-size: 1.1rem; color: #0f172a">
                  {{ patient.firstName }} {{ patient.lastName }}
                </div>
                <div class="muted" style="margin-top: 2px">{{ patient.email }}</div>
              </div>
              <div
                class="muted"
                style="
                  font-size: 0.75rem;
                  background: #f1f5f9;
                  padding: 2px 8px;
                  border-radius: 6px;
                "
              >
                ID: {{ patient.id }}
              </div>
            </div>

            <div style="display: flex; flex-direction: column; gap: 4px; margin-bottom: 16px">
              @if (patient.phone) {
                <div class="muted" style="display: flex; align-items: center; gap: 6px">
                  <app-ui-icon name="Phone" size="12"></app-ui-icon> {{ patient.phone }}
                </div>
              }
              <div class="muted" style="display: flex; align-items: center; gap: 6px">
                <app-ui-icon name="Calendar" size="12"></app-ui-icon>
                {{ patient.dateOfBirth | date: 'mediumDate' }}
              </div>
            </div>

            <div style="display: flex; gap: 8px; border-top: 1px solid #f1f5f9; padding-top: 12px">
              <button class="btn" style="flex: 1" (click)="onEditPatient(patient)">
                <app-ui-icon name="Edit" size="14" class="mr-1"></app-ui-icon> Edit
              </button>
              <button class="btn btn-danger" style="flex: 1" (click)="deletePatient(patient.id!)">
                <app-ui-icon name="Trash2" size="14" class="mr-1"></app-ui-icon> Delete
              </button>
            </div>
          </div>
        }
      </div>
    }
  }
</div>
